# bilimiao 精简版修改指南

## 目标
将 bilimiao 应用精简为只保留以下核心功能：
- ✅ 视频搜索
- ✅ 视频下载
- ✅ 视频播放

需要移除的功能：
- ❌ 主页（推荐、热门）
- ❌ 时光机
- ❌ 收藏
- ❌ 追番/追剧
- ❌ 历史记录
- ❌ 稍后看

---

## 修改步骤

### 1. 精简启动页面的库功能卡片

**文件**: `bilimiao-compose/src/main/java/cn/a10miaomiao/bilimiao/compose/components/start/StartLibraryCard.kt`

**修改内容**:
将整个 `StartLibraryCard` 函数体替换为空实现：

```kotlin
@Composable
fun StartLibraryCard(
    userId: Long?,
    navigateTo: (ComposePage) -> Unit,
) {
    // 精简版：移除所有库功能（收藏、追番、历史、稍后看）
    // 仅保留搜索、下载和播放功能
}
```

同时删除不再需要的导入语句（第3-47行），只保留：
```kotlin
package cn.a10miaomiao.bilimiao.compose.components.start

import cn.a10miaomiao.bilimiao.compose.base.ComposePage
import androidx.compose.runtime.Composable
```

删除 `LibraryItemCard` 组件定义（整个私有函数）。

---

### 2. 禁用主页路由

**文件**: `bilimiao-compose/src/main/java/cn/a10miaomiao/bilimiao/compose/BilimiaoPageRoute.kt`

**修改内容**:
在 `initRoute()` 函数中，注释掉 HomePage 的路由注册（第88-89行）：

```kotlin
// home - 精简版：移除主页（推荐、时光机等功能）
// composable<HomePage>()
```

---

### 3. 注释掉时光机相关路由（可选）

**文件**: 同上 `BilimiaoPageRoute.kt`

**修改内容**:
注释掉时光机相关页面（第206-208行）：

```kotlin
// time - 精简版：移除时光机功能
// composable<TimeSettingPage>()
// composable<TimeRegionDetailPage>()
```

---

### 4. 注释掉"我的"相关路由（可选）

**文件**: 同上 `BilimiaoPageRoute.kt`

**修改内容**:
注释掉收藏、追番、历史、稍后看等页面（第210-238行）：

```kotlin
// mine - 精简版：移除收藏、追番、历史、稍后看功能
// composable<MyBangumiPage>(...)
// composable<MyFollowPage>(...)
// composable<HistoryPage>(...)
// composable<WatchLaterPage>(...)
```

---

## 编译和测试

### 编译应用

```bash
cd d:\Downloads\BLVD
.\gradlew assembleDebug
```

### 生成的 APK 位置

```
app/build/outputs/apk/debug/app-debug.apk
```

### 安装测试

```bash
adb install app/build/outputs/apk/debug/app-debug.apk
```

---

## 预期效果

修改完成后，应用启动页面将只显示：
1. **用户信息卡片** - 登录状态、关注数等
2. **搜索卡片** - 视频搜索功能
3. **底部功能** - 视频下载、设置

不再显示：
- 收藏卡片
- 追番/追剧卡片
- 历史记录卡片
- 稍后看卡片
- 主页入口（推荐、时光机）

---

## 注意事项

1. **保留的功能**:
   - 搜索功能完整保留
   - 下载功能完整保留
   - 播放器功能完整保留
   - 用户登录功能保留
   - 设置功能保留

2. **可能的编译错误**:
   - 如果有其他地方引用了被移除的功能，可能需要额外修改
   - 建议先编译一次，根据错误提示进行调整

3. **进一步精简**:
   - 如果需要更彻底的精简，可以删除对应的页面文件
   - 删除不再使用的依赖库
   - 移除相关的资源文件

---

## 文件修改清单

- ✅ `bilimiao-compose/src/main/java/cn/a10miaomiao/bilimiao/compose/components/start/StartLibraryCard.kt`
- ✅ `bilimiao-compose/src/main/java/cn/a10miaomiao/bilimiao/compose/BilimiaoPageRoute.kt`

---

## 作者注释

本修改指南由 AI 助手生成，用于将 bilimiao 应用精简为只包含搜索、下载和播放功能的版本。
修改日期：2025-11-26
